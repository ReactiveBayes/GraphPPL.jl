<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Developers Guide · GraphPPL.jl</title><meta name="title" content="Developers Guide · GraphPPL.jl"/><meta property="og:title" content="Developers Guide · GraphPPL.jl"/><meta property="twitter:title" content="Developers Guide · GraphPPL.jl"/><meta name="description" content="Documentation for GraphPPL.jl."/><meta property="og:description" content="Documentation for GraphPPL.jl."/><meta property="twitter:description" content="Documentation for GraphPPL.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">GraphPPL.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../getting_started/">Getting Started</a></li><li><a class="tocitem" href="../syntax_guide/">Syntax Guide</a></li><li><a class="tocitem" href="../nested_models/">Nested Models</a></li><li><span class="tocitem">Plugins</span><ul><li><a class="tocitem" href="../plugins/overview/">Overview</a></li><li><a class="tocitem" href="../plugins/constraint_specification/">Variational Inference &amp; Constraints</a></li><li><a class="tocitem" href="../plugins/meta_specification/">Attaching metadata to nodes</a></li><li><a class="tocitem" href="../plugins/created_by/">Tracking creation of nodes</a></li><li><a class="tocitem" href="../plugins/node_id/">Setting ID of nodes</a></li></ul></li><li><a class="tocitem" href="../migration_3_to_4/">Migration Guide (from v3 to v4)</a></li><li class="is-active"><a class="tocitem" href>Developers Guide</a><ul class="internal"><li><a class="tocitem" href="#Model-Creation"><span>Model Creation</span></a></li><li><a class="tocitem" href="#Contexts,-Submodels-and-retrieving-NodeLabels"><span>Contexts, Submodels and retrieving NodeLabels</span></a></li><li><a class="tocitem" href="#Variable-Creation"><span>Variable Creation</span></a></li><li><a class="tocitem" href="#Model-macro"><span>Model macro</span></a></li><li><a class="tocitem" href="#Piecing-everying-together"><span>Piecing everying together</span></a></li><li><a class="tocitem" href="#ResizableArrays"><span>ResizableArrays</span></a></li><li><a class="tocitem" href="#Model-creation-engine-internal"><span>Model creation engine internal</span></a></li><li><a class="tocitem" href="#Model-macro-internals"><span>Model macro internals</span></a></li><li><a class="tocitem" href="#Auxiliary-functionality"><span>Auxiliary functionality</span></a></li></ul></li><li><a class="tocitem" href="../custom_backend/">Custom backend</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Developers Guide</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Developers Guide</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/ReactiveBayes/GraphPPL.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/main/docs/src/developers_guide.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Developers-guide"><a class="docs-heading-anchor" href="#Developers-guide">Developers guide</a><a id="Developers-guide-1"></a><a class="docs-heading-anchor-permalink" href="#Developers-guide" title="Permalink"></a></h1><p>This page is aimed at developers of inference backends who aim to integrate <code>GraphPPL</code> into their packages. <code>GraphPPL</code> uses the <code>MetaGraphsNext</code> package to represent a factor graph model as a graph. In <code>GraphPPL</code>, both variables and factors are represented by nodes, and the edges denote the inclusion of variables in factors.</p><h2 id="Model-Creation"><a class="docs-heading-anchor" href="#Model-Creation">Model Creation</a><a id="Model-Creation-1"></a><a class="docs-heading-anchor-permalink" href="#Model-Creation" title="Permalink"></a></h2><p>A model in <code>GraphPPL</code> is represented by the <code>GraphPPL.Model</code> structure.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.Model" href="#GraphPPL.Model"><code>GraphPPL.Model</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Model(graph::MetaGraph)</code></pre><p>A structure representing a probabilistic graphical model. It contains a <code>MetaGraph</code> object representing the factor graph and a <code>Base.RefValue{Int64}</code> object to keep track of the number of nodes in the graph.</p><p>Fields:</p><ul><li><code>graph</code>: A <code>MetaGraph</code> object representing the factor graph.</li><li><code>plugins</code>: A <code>PluginsCollection</code> object representing the plugins enabled in the model.</li><li><code>backend</code>: A <code>Backend</code> object representing the backend used in the model.</li><li><code>counter</code>: A <code>Base.RefValue{Int64}</code> object keeping track of the number of nodes in the graph.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L206-L218">source</a></section></article><p>Any model is a bipartite graph of variable and factor nodes, with edges denoting which variables are used in which factors. Models can be indexed with <code>GraphPPL.NodeLabel</code> structures, which is a unique identifier of every variable and factor node composed of its name and a global counter. Every <code>GraphPPL.NodeLabel</code> points to a <code>GraphPPL.NodeData</code>, which contains all relevant information to do Bethe Free Energy minimization in the factor graph. Edges in the graph can be accessed by querying the model with a <code>NodeLabel</code> pair of an edge that exists. Note that both variable and factor nodes are represented by <code>GraphPPL.NodeData</code> structures. To retrieve whether or not a node is a variable or a factor, we can use the <code>is_variable</code> and <code>is_factor</code> functions:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.is_variable" href="#GraphPPL.is_variable"><code>GraphPPL.is_variable</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">is_variable(nodedata::NodeData)</code></pre><p>Returns <code>true</code> if the node data is associated with a variable node, <code>false</code> otherwise. See also: <a href="#GraphPPL.is_factor"><code>is_factor</code></a>,</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L818-L823">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.is_factor" href="#GraphPPL.is_factor"><code>GraphPPL.is_factor</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">is_factor(nodedata::NodeData)</code></pre><p>Returns <code>true</code> if the node data is associated with a factor node, <code>false</code> otherwise. See also: <a href="#GraphPPL.is_variable"><code>is_variable</code></a>,</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L811-L816">source</a></section></article><h2 id="Contexts,-Submodels-and-retrieving-NodeLabels"><a class="docs-heading-anchor" href="#Contexts,-Submodels-and-retrieving-NodeLabels">Contexts, Submodels and retrieving NodeLabels</a><a id="Contexts,-Submodels-and-retrieving-NodeLabels-1"></a><a class="docs-heading-anchor-permalink" href="#Contexts,-Submodels-and-retrieving-NodeLabels" title="Permalink"></a></h2><p>After creating a <code>GraphPPL.Model</code> structure, it is important to know about the attached <code>Context</code>. The <code>Context</code> structure contains all variable and factor nodes in the scope of the model, and contains a <code>Context</code> stucture for all submodels. The context of a model can be accessed by the <code>GraphPPL.getcontext()</code> function:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.getcontext" href="#GraphPPL.getcontext"><code>GraphPPL.getcontext</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">getcontext(model::Model)</code></pre><p>Retrieves the context of a model. The context of a model contains the complete hierarchy of variables and factor nodes.  Additionally, contains all child submodels and their respective contexts. The Context supplies a mapping from symbols to <code>GraphPPL.NodeLabel</code> structures with which the model can be queried.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L1262-L1268">source</a></section></article><p>Contexts can be accessed like dictionaries, and will point to <code>NodeLabel</code> structures that can be used to query the graph. As a variable with the same name can also live in submodels, we nest the <code>Context</code> structures in the same hierarchy as the submodels themselves. Variables can be retrieved from the Context using a <code>Symbol</code>, whereas factors and submodels can be retrieved with their type and index. For example, to access the first <code>Normal</code> factor in the context, we can use the following syntax:</p><pre><code class="language-julia hljs">context[Normal, 1]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Distributions.Normal_4</code></pre><p>Because on any level, submodels are treated as factors, we can also access submodels in the same way. For example, to access the <code>Normal</code> factor in the first submodel, we can use the following syntax:</p><pre><code class="language-julia hljs">context[submodel_name, 1][Normal, 1]</code></pre><h2 id="Variable-Creation"><a class="docs-heading-anchor" href="#Variable-Creation">Variable Creation</a><a id="Variable-Creation-1"></a><a class="docs-heading-anchor-permalink" href="#Variable-Creation" title="Permalink"></a></h2><p>Variables in the graph can be created by the <code>GraphPPL.getorcreate!</code> function, that takes the model, the context, the name and the index of the variable, as well as node creation options (such as additional information that should be saved in nodes).</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.getorcreate!" href="#GraphPPL.getorcreate!"><code>GraphPPL.getorcreate!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">getorcreate!(model::Model, context::Context, options::NodeCreationOptions, name, index)</code></pre><p>Get or create a variable (name) from a factor graph model and context, using an index if provided.</p><p>This function searches for a variable (name) in the factor graph model and context specified by the arguments <code>model</code> and <code>context</code>. If the variable exists,  it returns it. Otherwise, it creates a new variable and returns it.</p><p><strong>Arguments</strong></p><ul><li><code>model::Model</code>: The factor graph model to search for or create the variable in.</li><li><code>context::Context</code>: The context to search for or create the variable in.</li><li><code>options::NodeCreationOptions</code>: Options for creating the variable. Must be a <code>NodeCreationOptions</code> object.</li><li><code>name</code>: The variable (name) to search for or create. Must be a symbol.</li><li><code>index</code>: Optional index for the variable. Can be an integer, a collection of integers, or <code>nothing</code>. If the index is <code>nothing</code> creates a single variable. </li></ul><p>If the index is an integer creates a vector-like variable. If the index is a collection of integers creates a tensor-like variable.</p><p><strong>Returns</strong></p><p>The variable (name) found or created in the factor graph model and context.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L1343-L1361">source</a></section></article><h2 id="Model-macro"><a class="docs-heading-anchor" href="#Model-macro">Model macro</a><a id="Model-macro-1"></a><a class="docs-heading-anchor-permalink" href="#Model-macro" title="Permalink"></a></h2><p>The <code>GraphPPL.jl</code> does not export the <code>@model</code> macro by default. For interactive usages (e.g. testing or plotting) <code>GraphPPL.jl</code> implements <a href="../custom_backend/#GraphPPL.DefaultBackend"><code>GraphPPL.DefaultBackend</code></a>, but any downstream packages must define their own <code>@model</code> macro and implement their <a href="../custom_backend/#custom-backend">custom backend</a>. </p><pre><code class="language-julia hljs">import GraphPPL: @model</code></pre><h2 id="Piecing-everying-together"><a class="docs-heading-anchor" href="#Piecing-everying-together">Piecing everying together</a><a id="Piecing-everying-together-1"></a><a class="docs-heading-anchor-permalink" href="#Piecing-everying-together" title="Permalink"></a></h2><p>In this section we will create a factor graph from scratch, materializing the underlying factor graph and applying constraints. First, let&#39;s define a model, we&#39;ll use the <code>gcv</code> model from the Nested Models section:</p><pre><code class="language-julia hljs">using GraphPPL, Distributions

@model function gcv(κ, ω, z, x, y)
    log_σ := κ * z + ω
    σ := exp(log_σ)
    y ~ Normal(x, σ)
end</code></pre><p>Let&#39;s also define a mean-field constraint around the <code>Normal</code> node:</p><pre><code class="language-julia hljs">constraints = @constraints begin
    q(x, y, σ) = q(x)q(y)q(σ)
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Constraints: 
  q(x, y, σ) = q(x)q(y)q(σ)
</code></pre><p>This defines the <code>gcv</code> submodel, but now we have to materialize this model. Let&#39;s greate a model and hook up all interfaces to variables that will later have to be supplied by the user.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.create_model" href="#GraphPPL.create_model"><code>GraphPPL.create_model</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">create_model([callback], generator::ModelGenerator)</code></pre><p>Create a model from the <code>ModelGenerator</code>. Accepts an optional callback that can be used to inject extra keyword arguments into the model creation process by downstream packages. For example:</p><pre><code class="language-julia hljs">using GraphPPL, Distributions

GraphPPL.@model function beta_bernoulli(y, a, b)
    θ ~ Beta(a, b)
    for i in eachindex(y)
        y[i] ~ Bernoulli(θ)
    end
end

data_for_y = rand(Bernoulli(0.5), 100)

model = GraphPPL.create_model(beta_bernoulli(a = 1, b = 1)) do model, ctx 
    # Inject the data into the model
    y = GraphPPL.datalabel(model, ctx, GraphPPL.NodeCreationOptions(kind = GraphPPL.VariableKindData), :y, data_for_y)
    return (; y = y, )
end

model isa GraphPPL.Model
# output
true</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/model_generator.jl#L45-L72">source</a></section></article><pre><code class="language-julia hljs">model = GraphPPL.create_model(GraphPPL.with_plugins(gcv(), GraphPPL.PluginsCollection(GraphPPL.VariationalConstraintsPlugin(constraints)))) do model, context
    return (;
        κ = GraphPPL.getorcreate!(model, context, GraphPPL.NodeCreationOptions(kind = :data, factorized = true), :κ, nothing),
        ω = GraphPPL.getorcreate!(model, context, GraphPPL.NodeCreationOptions(kind = :data, factorized = true), :ω, nothing),
        z = GraphPPL.getorcreate!(model, context, GraphPPL.NodeCreationOptions(kind = :data, factorized = true), :z, nothing),
        x = GraphPPL.getorcreate!(model, context, GraphPPL.NodeCreationOptions(kind = :data, factorized = true), :x, nothing),
        y = GraphPPL.getorcreate!(model, context, GraphPPL.NodeCreationOptions(kind = :data, factorized = true), :y, nothing)
    )
end;</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">GraphPPL.Model{MetaGraphsNext.MetaGraph{Int64, Graphs.SimpleGraphs.SimpleGraph{Int64}, GraphPPL.NodeLabel, GraphPPL.NodeData, GraphPPL.EdgeLabel, GraphPPL.Context, MetaGraphsNext.var&quot;#4#8&quot;, Float64}, GraphPPL.PluginsCollection{Tuple{GraphPPL.VariationalConstraintsPlugin{GraphPPL.Constraints{Vector{GraphPPL.FactorizationConstraint}, Vector{GraphPPL.MarginalFormConstraint}, Vector{GraphPPL.MessageFormConstraint}, Dict{Function, GraphPPL.GeneralSubModelConstraints}, Dict{GraphPPL.FactorID, GraphPPL.SpecificSubModelConstraints}}}}}, GraphPPL.DefaultBackend}(Meta graph based on a Graphs.SimpleGraphs.SimpleGraph{Int64} with vertex labels of type GraphPPL.NodeLabel, vertex metadata of type GraphPPL.NodeData, edge metadata of type GraphPPL.EdgeLabel, graph metadata given by GraphPPL.Context(0, Main.var&quot;Main&quot;.gcv, &quot;&quot;, nothing, {exp = 1, + = 1, Distributions.Normal = 1}, {}, {(exp, 1) = exp_10, (Distributions.Normal, 1) = Distributions.Normal_11, (+, 1) = +_8}, {:σ = σ_9, :anonymous_var_graphppl = anonymous_var_graphppl_7, :y = y_5, :κ = κ_1, :ω = ω_2, :log_σ = log_σ_6, :z = z_3, :x = x_4}, {}, {}, {}, Base.RefValue{Any}(y_5)), and default weight 1.0, GraphPPL.PluginsCollection{Tuple{GraphPPL.VariationalConstraintsPlugin{GraphPPL.Constraints{Vector{GraphPPL.FactorizationConstraint}, Vector{GraphPPL.MarginalFormConstraint}, Vector{GraphPPL.MessageFormConstraint}, Dict{Function, GraphPPL.GeneralSubModelConstraints}, Dict{GraphPPL.FactorID, GraphPPL.SpecificSubModelConstraints}}}}}((GraphPPL.VariationalConstraintsPlugin{GraphPPL.Constraints{Vector{GraphPPL.FactorizationConstraint}, Vector{GraphPPL.MarginalFormConstraint}, Vector{GraphPPL.MessageFormConstraint}, Dict{Function, GraphPPL.GeneralSubModelConstraints}, Dict{GraphPPL.FactorID, GraphPPL.SpecificSubModelConstraints}}}(Constraints: 
  q(x, y, σ) = q(x)q(y)q(σ)
),)), GraphPPL.DefaultBackend(), Base.RefValue{Int64}(11))</code></pre><p>Now we have a fully materialized model that can be passed to an inference engine. Factorization constraints are saved in two ways: as a tuple of lists of indices of interfaces that represent the individual clusters (e.g. <code>([1], [2, 3])</code>) and as a <a href="http://github.com/wouterwln/BitSetTuples.jl">BoundedBitSetTuple</a>. The <code>BoundedBitSetTuple</code> is a more efficient way to store the factorization constraints, which stores a <code>BitMatrix</code> under the hood representing the factorization clusters. Both can be accessed by the <code>GraphPPL.getextra</code> function:</p><pre><code class="language-julia hljs">context = GraphPPL.getcontext(model)
node = context[Normal, 1]
@show GraphPPL.getextra(model[node], :factorization_constraint_indices)
@show GraphPPL.getextra(model[node], :factorization_constraint_bitset)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">GraphPPL.getextra(model[node], :factorization_constraint_indices) = ([1], [2], [3])
GraphPPL.getextra(model[node], :factorization_constraint_bitset) = BitSetTuples.BoundedBitSetTuple(Bool[1 0 0; 0 1 0; 0 0 1])</code></pre><h2 id="ResizableArrays"><a class="docs-heading-anchor" href="#ResizableArrays">ResizableArrays</a><a id="ResizableArrays-1"></a><a class="docs-heading-anchor-permalink" href="#ResizableArrays" title="Permalink"></a></h2><p><code>GraphPPL</code> uses <code>ResizableArrays</code> to store arrays of random variables. A <code>ResizableArray</code> is a mutable array that can grow dynamically when data is assigned to it. This is why the <code>x[i] ~ Normal(0, 1)</code> syntax is allowed in <code>GraphPPL</code>; the <code>ResizableArray</code> <code>x</code> will check if <code>i</code> is a valid index and grow the array if necessary. </p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.ResizableArray" href="#GraphPPL.ResizableArray"><code>GraphPPL.ResizableArray</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ResizableArray{T, V, N} &lt;: AbstractArray{T, N}</code></pre><p>A ResizableArray is an array that can grow in any dimension. It handles like a regular AbstractArray when calling <code>getindex</code>, but for <code>setindex!</code>  it will automatically resize the array if the index is out of bounds. It is also possible to iterate over the array in the same way as for a regular array. The data is stored internally as a recursive vector. The depth of the recursion is fixed at construction time and cannot be changed. </p><p><strong>Constructor</strong></p><ul><li><code>ResizableArray(::Type{T})</code>: Create an empty resizable array of type <code>T</code> with depth 1, similar to a vector.</li><li><code>ResizableArray(::Type{T}, ::Val{N})</code>: Create an empty resizable array of type <code>T</code> with depth <code>N</code>, similar to AbstractArray{T, N}.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/resizable_array.jl#L3-L13">source</a></section></article><p><code>ResizableArray</code> is a subtype of <code>AbstractArray</code>, and implements all the functions that are expected from an array. Note that <code>size</code> returns the largest size of the array across each dimension, so an array of size <code>(2, 3)</code> does not necessarily has to have an element stored at index <code>(2, 3)</code>, instead there exists a vector of length 3 along the second dimension.</p><h2 id="Model-creation-engine-internal"><a class="docs-heading-anchor" href="#Model-creation-engine-internal">Model creation engine internal</a><a id="Model-creation-engine-internal-1"></a><a class="docs-heading-anchor-permalink" href="#Model-creation-engine-internal" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.Context" href="#GraphPPL.Context"><code>GraphPPL.Context</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Context</code></pre><p>Contains all information about a submodel in a probabilistic graphical model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L410-L414">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.ModelGenerator" href="#GraphPPL.ModelGenerator"><code>GraphPPL.ModelGenerator</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ModelGenerator(model, kwargs, plugins)</code></pre><p>The <code>ModelGenerator</code> structure is used to lazily create  the model with the given <code>model</code> and <code>kwargs</code> and <code>plugins</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/model_generator.jl#L2-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.FactorID" href="#GraphPPL.FactorID"><code>GraphPPL.FactorID</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">FactorID(fform, index)</code></pre><p>A unique identifier for a factor node in a probabilistic graphical model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L189-L193">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.NodeData" href="#GraphPPL.NodeData"><code>GraphPPL.NodeData</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">NodeData(context, properties, plugins)</code></pre><p>Data associated with a node in a probabilistic graphical model.  The <code>context</code> field stores the context of the node.  The <code>properties</code> field stores the properties of the node.  The <code>plugins</code> field stores additional properties of the node depending on which plugins were enabled.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L739-L746">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.NodeLabel" href="#GraphPPL.NodeLabel"><code>GraphPPL.NodeLabel</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">NodeLabel(name, global_counter::Int64)</code></pre><p>Unique identifier for a node (factor or variable) in a probabilistic graphical model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L240-L244">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.EdgeLabel" href="#GraphPPL.EdgeLabel"><code>GraphPPL.EdgeLabel</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">EdgeLabel(symbol, index)</code></pre><p>A unique identifier for an edge in a probabilistic graphical model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L267-L271">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.ProxyLabel" href="#GraphPPL.ProxyLabel"><code>GraphPPL.ProxyLabel</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ProxyLabel(name, index, proxied)</code></pre><p>A label that proxies another label in a probabilistic graphical model.  The proxied objects must implement the <code>is_proxied(::Type) = True()</code>. The proxy labels may spawn new variables in a model, if <code>maycreate</code> is set to <code>True()</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L288-L294">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.indexed_last" href="#GraphPPL.indexed_last"><code>GraphPPL.indexed_last</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Similar to <code>Base.last</code> when applied on <code>ProxyLabel</code>, but also applies <code>checked_getindex</code> while unrolling</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L404">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.lift_index" href="#GraphPPL.lift_index"><code>GraphPPL.lift_index</code></a> — <span class="docstring-category">Function</span></header><section><div><p>The <code>lift_index</code> function &quot;lifts&quot; (or tracks) the index that is going to be used to determine the shape of the container upon creation for a variable during the unrolling of the <code>ProxyLabel</code>. This index is used only if the container is set to be created and is not used if  variable container already exists.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L361-L365">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.datalabel" href="#GraphPPL.datalabel"><code>GraphPPL.datalabel</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">datalabel(model, context, options, name, collection = MissingCollection())</code></pre><p>A function for creating proxy data labels to pass into the model upon creation.  Can be useful in combination with <code>ModelGenerator</code> and <code>create_model</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L1026-L1031">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.StaticInterfaces" href="#GraphPPL.StaticInterfaces"><code>GraphPPL.StaticInterfaces</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A structure that holds interfaces of a node in the type argument <code>I</code>. Used for dispatch.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L1115-L1117">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.VariableRef" href="#GraphPPL.VariableRef"><code>GraphPPL.VariableRef</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">VariableRef(model::Model, context::Context, name::Symbol, index, external_collection = nothing)</code></pre><p><code>VariableRef</code> implements a lazy reference to a variable in the model.  The reference does not create an actual variable in the model immediatelly, but postpones the creation  until strictly necessarily, which is hapenning inside the <code>unroll</code> function. The postponed creation allows users to define  pass a single variable into a submodel, e.g. <code>y ~ submodel(x = x)</code>, but use it as an array inside the submodel,  e.g. <code>y[i] ~ Normal(x[i], 1.0)</code>. </p><p>Optionally accepts an <code>external_collection</code>, which defines the upper limit on the shape of the underlying collection. For example, an external collection <code>[ 1, 2, 3 ]</code> can be used both as <code>y ~ ...</code> and <code>y[i] ~ ...</code>, but not as <code>y[i, j] ~ ...</code>. By default, the <code>MissingCollection</code> is used for the <code>external_collection</code>, which does not restrict the shape of the underlying collection.</p><p>The <code>index</code> is always a <code>Tuple</code>. By default, <code>(nothing, )</code> is used, to indicate empty indices with no restrictions on the shape of the underlying collection.  If &quot;non-nothing&quot; index is supplied, e.g. <code>(1, )</code> the shape of the udnerlying collection will be fixed to match the index  (1-dimensional in case of <code>(1, )</code>, 2-dimensional in case of <code>(1, 1)</code> and so on).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L855-L871">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.makevarref" href="#GraphPPL.makevarref"><code>GraphPPL.makevarref</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">makevarref(fform::F, model::Model, context::Context, options::NodeCreationOptions, name::Symbol, index::Tuple)</code></pre><p>A function that creates <code>VariableRef</code>, but takes the <code>fform</code> into account. When <code>fform</code> happens to be <code>Atomic</code> creates  the underlying variable immediatelly without postponing. When <code>fform</code> is <code>Composite</code> does not create the actual variable,  but waits until strictly necessarily.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L896-L902">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.MissingCollection" href="#GraphPPL.MissingCollection"><code>GraphPPL.MissingCollection</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A placeholder collection for <code>VariableRef</code> when the actual external collection is not yet available.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L1047-L1049">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.VariableNodeProperties" href="#GraphPPL.VariableNodeProperties"><code>GraphPPL.VariableNodeProperties</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">VariableNodeProperties(name, index, kind, link, value)</code></pre><p>Data associated with a variable node in a probabilistic graphical model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L650-L654">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.FactorNodeProperties" href="#GraphPPL.FactorNodeProperties"><code>GraphPPL.FactorNodeProperties</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">FactorNodeProperties(fform, neighbours)</code></pre><p>Data associated with a factor node in a probabilistic graphical model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L710-L714">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.VarDict" href="#GraphPPL.VarDict"><code>GraphPPL.VarDict</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">VarDict</code></pre><p>A recursive dictionary structure that contains all variables in a probabilistic graphical model. Iterates over all variables in the model and their children in a linear fashion, but preserves the recursive nature of the actual model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L563-L568">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.AnonymousVariable" href="#GraphPPL.AnonymousVariable"><code>GraphPPL.AnonymousVariable</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AnonymousVariable(model, context)</code></pre><p>Defines a lazy structure for anonymous variables. The actual anonymous variables materialize only in <code>make_node!</code> upon calling, because it needs arguments to the <code>make_node!</code> in order to create proper links.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L1479-L1484">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.NodeDataExtraKey" href="#GraphPPL.NodeDataExtraKey"><code>GraphPPL.NodeDataExtraKey</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A compile time key to access the <code>extra</code> properties of the <code>NodeData</code> structure.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L791-L793">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.IndexedVariable" href="#GraphPPL.IndexedVariable"><code>GraphPPL.IndexedVariable</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">IndexedVariable(name, index)</code></pre><p><code>IndexedVariable</code> represents a reference to a variable named <code>name</code> with index <code>index</code>. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L119-L123">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.VariableKindRandom" href="#GraphPPL.VariableKindRandom"><code>GraphPPL.VariableKindRandom</code></a> — <span class="docstring-category">Constant</span></header><section><div><p>Defines a <code>random</code> (or <code>latent</code>) kind for a variable in a probabilistic graphical model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L684">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.VariableKindData" href="#GraphPPL.VariableKindData"><code>GraphPPL.VariableKindData</code></a> — <span class="docstring-category">Constant</span></header><section><div><p>Defines a <code>data</code> kind for a variable in a probabilistic graphical model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L686">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.VariableKindConstant" href="#GraphPPL.VariableKindConstant"><code>GraphPPL.VariableKindConstant</code></a> — <span class="docstring-category">Constant</span></header><section><div><p>Defines a <code>constant</code> kind for a variable in a probabilistic graphical model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L688">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.VariableKindUnknown" href="#GraphPPL.VariableKindUnknown"><code>GraphPPL.VariableKindUnknown</code></a> — <span class="docstring-category">Constant</span></header><section><div><p>Placeholder for a variable kind in a probabilistic graphical model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L690">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.Deterministic" href="#GraphPPL.Deterministic"><code>GraphPPL.Deterministic</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Deterministic</code></pre><p><code>Deterministic</code> object used to parametrize factor node object with determinstic type of relationship between variables.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L175-L179">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.Stochastic" href="#GraphPPL.Stochastic"><code>GraphPPL.Stochastic</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Stochastic</code></pre><p><code>Stochastic</code> object used to parametrize factor node object with stochastic type of relationship between variables.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L168-L172">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.Atomic" href="#GraphPPL.Atomic"><code>GraphPPL.Atomic</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Atomic</code></pre><p><code>Atomic</code> object used as a trait of structs and functions that are composed of a single node and are therefore materialized as a single node in the factor graph.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L153-L156">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.Composite" href="#GraphPPL.Composite"><code>GraphPPL.Composite</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Composite</code></pre><p><code>Composite</code> object used as a trait of structs and functions that are composed of multiple nodes and therefore implement <code>make_node!</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L146-L150">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.NodeCreationOptions" href="#GraphPPL.NodeCreationOptions"><code>GraphPPL.NodeCreationOptions</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">NodeCreationOptions(namedtuple)</code></pre><p>Options for creating a node in a probabilistic graphical model. These are typically coming from the <code>where {}</code> block  in the <code>@model</code> macro, but can also be created manually. Expects a <code>NamedTuple</code> as an input.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L606-L611">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.variable_nodes" href="#GraphPPL.variable_nodes"><code>GraphPPL.variable_nodes</code></a> — <span class="docstring-category">Function</span></header><section><div><p>A version <code>variable_nodes(model)</code> that uses a callback function to process the variable nodes. The callback function accepts both the label and the node data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L842-L845">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.factor_nodes" href="#GraphPPL.factor_nodes"><code>GraphPPL.factor_nodes</code></a> — <span class="docstring-category">Function</span></header><section><div><p>A version <code>factor_nodes(model)</code> that uses a callback function to process the factor nodes. The callback function accepts both the label and the node data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L829-L832">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.missing_interfaces" href="#GraphPPL.missing_interfaces"><code>GraphPPL.missing_interfaces</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">missing_interfaces(node_type, val, known_interfaces)</code></pre><p>Returns the interfaces that are missing for a node. This is used when inferring the interfaces for a node that is composite.</p><p><strong>Arguments</strong></p><ul><li><code>node_type</code>: The type of the node as a Function object.</li><li><code>val</code>: The value of the amount of interfaces the node is supposed to have. This is a <code>Static.StaticInt</code> object.</li><li><code>known_interfaces</code>: The known interfaces for the node.</li></ul><p><strong>Returns</strong></p><ul><li><code>missing_interfaces</code>: A <code>Vector</code> of the missing interfaces.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L1733-L1745">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.hasextra" href="#GraphPPL.hasextra"><code>GraphPPL.hasextra</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">hasextra(node::NodeData, key::Symbol)</code></pre><p>Checks if <code>NodeData</code> has an extra property with the given key.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L770-L774">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.getextra" href="#GraphPPL.getextra"><code>GraphPPL.getextra</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">getextra(node::NodeData, key::Symbol, [ default ])</code></pre><p>Returns the extra property with the given key. Optionally, if the property does not exist, returns the default value.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L776-L780">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.setextra!" href="#GraphPPL.setextra!"><code>GraphPPL.setextra!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">setextra!(node::NodeData, key::Symbol, value)</code></pre><p>Sets the extra property with the given key to the given value.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L784-L789">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.make_node!" href="#GraphPPL.make_node!"><code>GraphPPL.make_node!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">make_node!</code></pre><p>Make a new factor node in the Model and specified Context, attach it to the specified interfaces, and return the interface that is on the lhs of the <code>~</code> operator.</p><p><strong>Arguments</strong></p><ul><li><code>model::Model</code>: The model to add the node to.</li><li><code>ctx::Context</code>: The context in which to add the node.</li><li><code>fform</code>: The function that the node represents.</li><li><code>lhs_interface</code>: The interface that is on the lhs of the <code>~</code> operator.</li><li><code>rhs_interfaces</code>: The interfaces that are the arguments of fform on the rhs of the <code>~</code> operator.</li><li><code>__parent_options__::NamedTuple = nothing</code>: The options to attach to the node.</li><li><code>__debug__::Bool = false</code>: Whether to attach debug information to the factor node.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L1982-L1995">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.add_atomic_factor_node!" href="#GraphPPL.add_atomic_factor_node!"><code>GraphPPL.add_atomic_factor_node!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">add_atomic_factor_node!(model::Model, context::Context, options::NodeCreationOptions, fform)</code></pre><p>Add an atomic factor node to the model with the given name. The function generates a new symbol for the node and adds it to the model with the generated symbol as the key and a <code>FactorNodeData</code> struct.</p><p>Args:     - <code>model::Model</code>: The model to which the node is added.     - <code>context::Context</code>: The context to which the symbol is added.     - <code>options::NodeCreationOptions</code>: The options for the creation process.     - <code>fform::Any</code>: The functional form of the node.</p><p>Returns:     - The generated label for the node.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L1563-L1578">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.add_toplevel_model!" href="#GraphPPL.add_toplevel_model!"><code>GraphPPL.add_toplevel_model!</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Add the <code>fform</code> as the toplevel model to the <code>model</code> and <code>context</code> with the specified <code>interfaces</code>. Calls the postprocess logic for the attached plugins of the model. Should be called only once for a given <code>Model</code> object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L2044-L2047">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.add_variable_node!" href="#GraphPPL.add_variable_node!"><code>GraphPPL.add_variable_node!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">add_variable_node!(model::Model, context::Context, options::NodeCreationOptions, name::Symbol, index)</code></pre><p>Add a variable node to the model with the given <code>name</code> and <code>index</code>. This function is unsafe (doesn&#39;t check if a variable with the given name already exists in the model). </p><p>Args:     - <code>model::Model</code>: The model to which the node is added.     - <code>context::Context</code>: The context to which the symbol is added.     - <code>options::NodeCreationOptions</code>: The options for the creation process.     - <code>name::Symbol</code>: The ID of the variable.     - <code>index</code>: The index of the variable.</p><p>Returns:     - The generated symbol for the variable.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L1436-L1451">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.add_composite_factor_node!" href="#GraphPPL.add_composite_factor_node!"><code>GraphPPL.add_composite_factor_node!</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Add a composite factor node to the model with the given name.</p><p>The function generates a new symbol for the node and adds it to the model with the generated symbol as the key and a <code>NodeData</code> struct with <code>is_variable</code> set to <code>false</code> and <code>node_name</code> set to the given name.</p><p>Args:     - <code>model::Model</code>: The model to which the node is added.     - <code>parent_context::Context</code>: The context to which the symbol is added.     - <code>context::Context</code>: The context of the composite factor node.     - <code>node_name::Symbol</code>: The name of the node.</p><p>Returns:     - The generated id for the node.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L1608-L1623">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.copy_markov_blanket_to_child_context" href="#GraphPPL.copy_markov_blanket_to_child_context"><code>GraphPPL.copy_markov_blanket_to_child_context</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">copy_markov_blanket_to_child_context(child_context::Context, interfaces::NamedTuple)</code></pre><p>Copy the variables in the Markov blanket of a parent context to a child context, using a mapping specified by a named tuple.</p><p>The Markov blanket of a node or model in a Factor Graph is defined as the set of its outgoing interfaces.  This function copies the variables in the Markov blanket of the parent context specified by the named tuple <code>interfaces</code> to the child context <code>child_context</code>,      by setting each child variable in <code>child_context.individual_variables</code> to its corresponding parent variable in <code>interfaces</code>.</p><p><strong>Arguments</strong></p><ul><li><code>child_context::Context</code>: The child context to which to copy the Markov blanket variables.</li><li><code>interfaces::NamedTuple</code>: A named tuple that maps child variable names to parent variable names.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L1307-L1319">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.generate_nodelabel" href="#GraphPPL.generate_nodelabel"><code>GraphPPL.generate_nodelabel</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">generate_nodelabel(model::Model, name::Symbol)</code></pre><p>Generate a new <code>NodeLabel</code> object with a unique identifier based on the specified name and the number of nodes already in the model.</p><p>Arguments:</p><ul><li><code>model</code>: A <code>Model</code> object representing the probabilistic graphical model.</li><li><code>name</code>: A symbol representing the name of the node.</li><li><code>variable_type</code>: A UInt8 representing the type of the variable. 0 = factor, 1 = individual variable, 2 = vector variable, 3 = tensor variable</li><li><code>index</code>: An integer or tuple of integers representing the index of the variable.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L1245-L1256">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.FunctionalIndex" href="#GraphPPL.FunctionalIndex"><code>GraphPPL.FunctionalIndex</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">FunctionalIndex</code></pre><p>A special type of an index that represents a function that can be used only in pair with a collection.  An example of a <code>FunctionalIndex</code> can be <code>firstindex</code> or <code>lastindex</code>, but more complex use cases are possible too,  e.g. <code>firstindex + 1</code>. Important part of the implementation is that the resulting structure is <code>isbitstype(...) = true</code>,  that allows to store it in parametric type as valtype. One use case for this structure is to dispatch on and to replace <code>begin</code> or <code>end</code>  (or more complex use cases, e.g. <code>begin + 1</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L18-L26">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.FunctionalRange" href="#GraphPPL.FunctionalRange"><code>GraphPPL.FunctionalRange</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">FunctionalRange(left, range)</code></pre><p>A range can handle <code>FunctionalIndex</code> as one of (or both) the bounds.</p><pre><code class="language-julia-repl hljs">julia&gt; first = GraphPPL.FunctionalIndex{:begin}(firstindex)
(begin)

julia&gt; last = GraphPPL.FunctionalIndex{:end}(lastindex)
(end)

julia&gt; range = GraphPPL.FunctionalRange(first + 1, last - 1)
((begin) + 1):((end) - 1)

julia&gt; [ 1.0, 2.0, 3.0, 4.0 ][range]
2-element Vector{Float64}:
 2.0
 3.0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L78-L98">source</a></section></article><h2 id="Model-macro-internals"><a class="docs-heading-anchor" href="#Model-macro-internals">Model macro internals</a><a id="Model-macro-internals-1"></a><a class="docs-heading-anchor-permalink" href="#Model-macro-internals" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.combine_args" href="#GraphPPL.combine_args"><code>GraphPPL.combine_args</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">combine_args(args::Vector, kwargs::Nothing)</code></pre><p>Combines a vector of arguments into a single expression.</p><p><strong>Arguments</strong></p><ul><li><code>args::Vector</code>: The vector of arguments.</li><li><code>kwargs::Nothing</code>: The keyword arguments. This argument is always <code>nothing</code>.</li></ul><p><strong>Returns</strong></p><p>An <code>Expr</code> with the combined arguments.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/model_macro.jl#L479-L490">source</a></section><section><div><pre><code class="language-julia hljs">combine_args(args::Vector, kwargs::Vector)</code></pre><p>Combines a vector of arguments and a vector of keyword arguments into a single expression.</p><p><strong>Arguments</strong></p><ul><li><code>args::Vector</code>: The vector of arguments.</li><li><code>kwargs::Vector</code>: The vector of keyword arguments.</li></ul><p><strong>Returns</strong></p><p>An <code>Expr</code> with the combined arguments and keyword arguments.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/model_macro.jl#L493-L504">source</a></section><section><div><pre><code class="language-julia hljs">combine_args(args::Nothing, kwargs::Nothing)</code></pre><p>Returns <code>nothing</code>.</p><p><strong>Arguments</strong></p><ul><li><code>args::Nothing</code>: The arguments. This argument is always <code>nothing</code>.</li><li><code>kwargs::Nothing</code>: The keyword arguments. This argument is always <code>nothing</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/model_macro.jl#L512-L520">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.convert_local_statement" href="#GraphPPL.convert_local_statement"><code>GraphPPL.convert_local_statement</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">convert_local_statement(expr::Expr)</code></pre><p>Converts a statement with the <code>local</code> keyword to the creation of an additional variable and the inclusion of thie variable in the subsequent tilde expression.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/model_macro.jl#L186-L190">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.add_get_or_create_expression" href="#GraphPPL.add_get_or_create_expression"><code>GraphPPL.add_get_or_create_expression</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">add_get_or_create_expression(e::Expr)</code></pre><p>Add code to get or create a variable in the graph. The code generated by this function ensures that the left-hand-side is always defined in the local scope and can be used in <code>make_node!</code> afterwards.</p><p><strong>Arguments</strong></p><ul><li><code>e::Expr</code>: The expression to modify.</li></ul><p><strong>Returns</strong></p><p>A <code>quote</code> block with the modified expression.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/model_macro.jl#L338-L348">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.keyword_expressions_to_named_tuple" href="#GraphPPL.keyword_expressions_to_named_tuple"><code>GraphPPL.keyword_expressions_to_named_tuple</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">keyword_expressions_to_named_tuple(keywords::Vector)</code></pre><p>Converts a vector of keyword expressions to a named tuple.</p><p><strong>Arguments</strong></p><ul><li><code>keywords::Vector</code>: The vector of keyword expressions.</li></ul><p><strong>Returns</strong></p><ul><li><code>NamedTuple</code>: The named tuple.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; keyword_expressions_to_named_tuple([:($(Expr(:kw, :in1, :y))), :($(Expr(:kw, :in2, :z)))])
(in1 = y, in2 = z)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/model_macro.jl#L413-L430">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.convert_anonymous_variables" href="#GraphPPL.convert_anonymous_variables"><code>GraphPPL.convert_anonymous_variables</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">convert_anonymous_variables(e::Expr)</code></pre><p>Convert a function argument in the right-hand side of an expression to an anonymous variable. This function is used to convert function calls in the arguments of node creations to anonymous variables in the graph.</p><p><strong>Example</strong></p><pre><code class="nohighlight hljs">```jldoctest
julia&gt; convert_anonymous_variables(:(x ~ Normal(μ, sqrt(σ2)) where {created_by=:(Normal(μ, sqrt(σ2)))}))
:(x ~ (Normal(μ, anon_1 ~ (sqrt(σ2) where {anonymous = true, created_by = :(Normal(μ, sqrt(σ2)))})) where (created_by = :(Normal(μ, sqrt(σ2))))))
```</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/model_macro.jl#L305-L316">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.is_kwargs_expression" href="#GraphPPL.is_kwargs_expression"><code>GraphPPL.is_kwargs_expression</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">is_kwargs_expression(e::Expr)</code></pre><p>Returns <code>true</code> if the given expression <code>e</code> is a keyword argument expression, i.e., if its head is either <code>:kw</code> or <code>:parameters</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/model_macro.jl#L204-L208">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.convert_to_kwargs_expression" href="#GraphPPL.convert_to_kwargs_expression"><code>GraphPPL.convert_to_kwargs_expression</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">convert_to_kwargs_expression(expr::Expr)</code></pre><p>Convert an expression to a keyword argument expression. This function is used in the conversion of tilde and dot-tilde expressions to ensure that the arguments are passed as keyword arguments.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/model_macro.jl#L229-L233">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.convert_deterministic_statement" href="#GraphPPL.convert_deterministic_statement"><code>GraphPPL.convert_deterministic_statement</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">convert_deterministic_statement(expr::Expr)</code></pre><p>Convert a deterministic statement to a tilde statement with the <code>is_deterministic</code> option set to <code>true</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/model_macro.jl#L170-L174">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.proxy_args" href="#GraphPPL.proxy_args"><code>GraphPPL.proxy_args</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Converts an expression into its proxied equivalent. Used to pass variables in sub-models and create a chain of proxied labels.</p><pre><code class="language-julia-repl hljs">julia&gt; x = GraphPPL.NodeLabel(:x, 1)
x_1
julia&gt; GraphPPL.proxy_args(:(y = x))
:(y = GraphPPL.proxylabel(:x, x, nothing, GraphPPL.False()))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/model_macro.jl#L436-L445">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.save_expression_in_tilde" href="#GraphPPL.save_expression_in_tilde"><code>GraphPPL.save_expression_in_tilde</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">save_expression_in_tilde(expr::Expr)</code></pre><p>Save the expression found in the tilde syntax in the <code>created_by</code> field of the expression. This function also ensures that the <code>where</code> clause is always present in the tilde syntax.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/model_macro.jl#L119-L123">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.convert_meta_object" href="#GraphPPL.convert_meta_object"><code>GraphPPL.convert_meta_object</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">convert_meta_object(e::Expr)</code></pre><p>Converts a variable meta or a factor meta call on the left hand side of a meta specification to a <code>GraphPPL.MetaObject</code>.</p><p><strong>Arguments</strong></p><ul><li><code>e::Expr</code>: The expression to convert.</li></ul><p><strong>Returns</strong></p><ul><li><code>Expr</code>: The resulting expression with the variable reference or factor function call converted to a <code>GraphPPL.MetaObject</code>.</li></ul><p><strong>Examples</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/plugins/meta/meta_macro.jl#L98-L110">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.get_boilerplate_functions" href="#GraphPPL.get_boilerplate_functions"><code>GraphPPL.get_boilerplate_functions</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_boilerplate_functions(ms_name, ms_args, num_interfaces)</code></pre><p>Returns a quote block containing boilerplate functions for a model macro.</p><p><strong>Arguments</strong></p><ul><li><code>ms_name</code>: The name of the model macro.</li><li><code>ms_args</code>: The arguments of the model macro.</li><li><code>num_interfaces</code>: The number of interfaces of the model macro.</li></ul><p><strong>Returns</strong></p><ul><li><code>quote</code>: A quote block containing the boilerplate functions for the model macro.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/model_macro.jl#L638-L650">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.apply_pipeline_collection" href="#GraphPPL.apply_pipeline_collection"><code>GraphPPL.apply_pipeline_collection</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">apply_pipeline_collection(e::Expr, collection)</code></pre><p>Similar to <a href="#GraphPPL.apply_pipeline"><code>apply_pipeline</code></a>, but applies a collection of pipeline functions to an expression. </p><p><strong>Arguments</strong></p><ul><li><code>e::Expr</code>: An expression to apply the pipeline to.</li><li><code>collection</code>: A collection of functions to apply to the expressions in <code>e</code>.</li></ul><p><strong>Returns</strong></p><p>The result of applying the pipeline function to <code>e</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/model_macro.jl#L52-L63">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.convert_tilde_expression" href="#GraphPPL.convert_tilde_expression"><code>GraphPPL.convert_tilde_expression</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">convert_tilde_expression(e::Expr)</code></pre><p>Converts a tilde expression to a <code>make_node!</code> call. Converts broadcasted tile expressions to <code>make_node!</code> calls with nothing as the lhs to indicate that a variable should be created on every broadcasted pass.</p><p><strong>Arguments</strong></p><ul><li><code>e::Expr</code>: The expression to convert.</li></ul><p><strong>Returns</strong></p><ul><li><code>Expr</code>: The converted expression.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt; convert_tilde_expression(:(x ~ Normal(0, 1) where {created_by = (x~Normal(0,1))}))
quote
    GraphPPL.make_node!(__model__, __context__, Normal, x, [0, 1]; options = Dict{Any, Any}(:created_by =&gt; :(x ~ Normal(0, 1))), debug = debug)
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/model_macro.jl#L557-L576">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.check_reserved_variable_names_model" href="#GraphPPL.check_reserved_variable_names_model"><code>GraphPPL.check_reserved_variable_names_model</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">check_reserved_variable_names_model(expr::Expr)</code></pre><p>Check if any of the variable names in the given expression are reserved in the model macro. Reserved variable names are:</p><ul><li><code>__parent_options__</code></li><li><code>__debug__</code></li><li><code>__model__</code></li><li><code>__context__</code></li><li><code>__parent_context__</code></li><li><code>__lhs_interface__</code></li><li><code>__rhs_interfaces__</code></li><li><code>__interfaces__</code></li></ul><p><strong>Arguments</strong></p><ul><li><code>expr::Expr</code>: The expression to check for reserved variable names.</li></ul><p><strong>Examples</strong></p><p><code>jldoctest julia&gt; check_reserved_variable_names_model(:(__parent_options__ ~ Normal(μ, σ)) ERROR: Variable name in __parent_options__ ~ Normal(μ, σ) cannot be used as it is a reserved variable name in the model macro.</code>`</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/model_macro.jl#L68-L89">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.generate_get_or_create" href="#GraphPPL.generate_get_or_create"><code>GraphPPL.generate_get_or_create</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">generate_get_or_create(s::Symbol, lhs::Symbol, index::Nothing)</code></pre><p>Generates code to get or create a variable in the graph. This function is used to generate code for variables that are not indexed.</p><p><strong>Arguments</strong></p><ul><li><code>s::Symbol</code>: The symbol representing the variable.</li><li><code>index::Nothing</code>: The index of the variable. This argument is always <code>nothing</code>.</li></ul><p><strong>Returns</strong></p><p>A <code>quote</code> block with the code to get or create the variable in the graph.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/model_macro.jl#L362-L373">source</a></section><section><div><pre><code class="language-julia hljs">generate_get_or_create(s::Symbol, lhs::Expr, index::AbstractArray)</code></pre><p>Generates code to get or create a variable in the graph. This function is used to generate code for variables that are indexed.</p><p><strong>Arguments</strong></p><ul><li><code>s::Symbol</code>: The symbol representing the variable.</li><li><code>index::AbstractArray</code>: The index of the variable.</li></ul><p><strong>Returns</strong></p><p>A <code>quote</code> block with the code to get or create the variable in the graph.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/model_macro.jl#L376-L387">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.add_meta_construction" href="#GraphPPL.add_meta_construction"><code>GraphPPL.add_meta_construction</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">add_meta_construction(e::Expr)</code></pre><p>Add a meta construction to the given expression <code>e</code>. This function creates a new <code>GraphPPL.MetaSpecification</code> object and assigns it to the <code>__meta__</code> variable. It then evaluates the given expression <code>e</code> in the context of this new <code>GraphPPL.MetaSpecification</code> object, and returns the resulting <code>GraphPPL.MetaSpecification</code> object.</p><p><strong>Arguments</strong></p><ul><li><code>e::Expr</code>: The expression to evaluate in the context of the new <code>GraphPPL.MetaSpecification</code> object.</li></ul><p><strong>Returns</strong></p><ul><li><code>e::Expr</code>: The expression that will generate the <code>GraphPPL.MetaSpecification</code> object.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/plugins/meta/meta_macro.jl#L6-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.apply_pipeline" href="#GraphPPL.apply_pipeline"><code>GraphPPL.apply_pipeline</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">apply_pipeline(e::Expr, pipeline)</code></pre><p>Apply a pipeline function to an expression.</p><p>The <code>apply_pipeline</code> function takes an expression <code>e</code> and a <code>pipeline</code> function and applies the function in the pipeline to <code>e</code> when walking over it. The walk utilized can be specified by implementing <code>what_walk</code> for a pipeline funciton.</p><p><strong>Arguments</strong></p><ul><li><code>e::Expr</code>: An expression to apply the pipeline to.</li><li><code>pipeline</code>: A function to apply to the expressions in <code>e</code>.</li></ul><p><strong>Returns</strong></p><p>The result of applying the pipeline function to <code>e</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/model_macro.jl#L33-L46">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.options_vector_to_named_tuple" href="#GraphPPL.options_vector_to_named_tuple"><code>GraphPPL.options_vector_to_named_tuple</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">options_vector_to_named_tuple(options::AbstractArray)</code></pre><p>Converts the array found by pattern matching on the where clause in a tilde expression into a named tuple.</p><p><strong>Arguments</strong></p><ul><li><code>options::AbstractArray</code>: An array of options.</li></ul><p><strong>Returns</strong></p><ul><li><code>result</code>: A named tuple of options.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/model_macro.jl#L618-L628">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.get_created_by" href="#GraphPPL.get_created_by"><code>GraphPPL.get_created_by</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_created_by(options::AbstractArray)</code></pre><p>Retrieve the <code>created_by</code> option from the given options. Expects the options to be retrieved using the <code>MacroTools.@capture</code> macro.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/model_macro.jl#L154-L158">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.convert_to_anonymous" href="#GraphPPL.convert_to_anonymous"><code>GraphPPL.convert_to_anonymous</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">convert_to_anonymous(e::Expr, created_by)</code></pre><p>Convert an expression to an anonymous variable. This function is used to convert function calls in the arguments of node creations to anonymous variables in the graph.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/model_macro.jl#L270-L274">source</a></section></article><h2 id="Auxiliary-functionality"><a class="docs-heading-anchor" href="#Auxiliary-functionality">Auxiliary functionality</a><a id="Auxiliary-functionality-1"></a><a class="docs-heading-anchor-permalink" href="#Auxiliary-functionality" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GraphPPL.prune!" href="#GraphPPL.prune!"><code>GraphPPL.prune!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">prune!(m::Model)</code></pre><p>Remove all nodes from the model that are not connected to any other node.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ReactiveBayes/GraphPPL.jl/blob/b3ae2a6917e898f3bfe653f538a191f61f7bde34/src/graph_engine.jl#L2062-L2066">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../migration_3_to_4/">« Migration Guide (from v3 to v4)</a><a class="docs-footer-nextpage" href="../custom_backend/">Custom backend »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.4.1 on <span class="colophon-date" title="Monday 10 June 2024 15:36">Monday 10 June 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
